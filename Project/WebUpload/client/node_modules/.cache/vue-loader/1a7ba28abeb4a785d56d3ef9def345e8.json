{"remainingRequest":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/src/components/AccompanySingForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/src/components/AccompanySingForm.vue","mtime":1619445057000},{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldEZpbGVUeXBlIH0gZnJvbSAnLi4vdXRpbHMvdXRpbHMnOwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1cGxvYWRGaWxlczoge30sCiAgICAgIGZpbGVMaXN0T3JpZ2luYWw6IFtdLAogICAgICBmaWxlTGlzdEFjY29tcGFueTogW10sCiAgICAgIGZpbGVMaXN0THlyaWM6IFtdLAogICAgICBmaWxlTGlzdE1WOiBbXSwKICAgICAgcnVsZUZvcm06IHt9LAogICAgICBydWxlczogewogICAgICAgIG9yaWdpbmFsOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlIH0sCiAgICAgICAgXSwKICAgICAgICBhY2NvbXBhbnk6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIH0KICAgICAgICBdLAogICAgICAgIGx5cmljOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCB9CiAgICAgICAgXSwKICAgICAgICBtdjogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgfQogICAgICAgIF0sCiAgICAgIH0sCiAgICB9OwogIH0sCgogIG1ldGhvZHM6IHsKICAgIG9uT3JpZ2luYWxDaGFuZ2UoZmlsZSkgewogICAgICBpZiAoZmlsZS5yYXcpIHsKICAgICAgICB2YXIgb3JpZ2luYWwgPSBmaWxlLnJhdzsKICAgICAgICBjb25zdCBmaWxlVHlwZSA9IGdldEZpbGVUeXBlKG9yaWdpbmFsKTsKICAgICAgICBpZiAoZmlsZVR5cGUgIT09ICd3YXYnKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLor7fpgInmi6l3YXbmoLzlvI/mlofku7bvvIEiKTsKICAgICAgICAgIHRoaXMuZmlsZUxpc3RPcmlnaW5hbCA9IFtdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnVwbG9hZEZpbGVzWydvcmlnaW5hbCddID0gb3JpZ2luYWw7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgb25BY2NvbXBhbnlDaGFuZ2UoZmlsZSkgewogICAgICBpZiAoZmlsZS5yYXcpIHsKICAgICAgICB2YXIgYWNjb21wYW55ID0gZmlsZS5yYXc7CiAgICAgICAgY29uc3QgZmlsZVR5cGUgPSBnZXRGaWxlVHlwZShhY2NvbXBhbnkpOwogICAgICAgIGlmIChmaWxlVHlwZSAhPT0gJ3dhdicpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuivt+mAieaLqXdhduagvOW8j+aWh+S7tu+8gSIpOwogICAgICAgICAgdGhpcy5maWxlTGlzdEFjY29tcGFueSA9IFtdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnVwbG9hZEZpbGVzWydhY2NvbXBhbnlfYWNjb21wYW55J10gPSBhY2NvbXBhbnk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgb25MeXJpY0NoYW5nZShmaWxlKSB7CiAgICAgIGlmIChmaWxlLnJhdykgewogICAgICAgIHZhciBseXJpYyA9IGZpbGUucmF3OwogICAgICAgIGNvbnN0IGZpbGVUeXBlID0gZ2V0RmlsZVR5cGUobHlyaWMpOwogICAgICAgIGlmIChmaWxlVHlwZSAhPT0gJ2xyYycpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuivt+mAieaLqWxyY+agvOW8j+aWh+S7tu+8gSIpOwogICAgICAgICAgdGhpcy5maWxlTGlzdEx5cmljID0gW107CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMudXBsb2FkRmlsZXNbJ2x5cmljJ10gPSBseXJpYzsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBvbk1WQ2hhbmdlKGZpbGUpIHsKICAgICAgaWYgKGZpbGUucmF3KSB7CiAgICAgICAgdmFyIG12ID0gZmlsZS5yYXc7CiAgICAgICAgY29uc3QgZmlsZVR5cGUgPSBnZXRGaWxlVHlwZShtdik7CiAgICAgICAgaWYgKGZpbGVUeXBlICE9PSAnbXA0JykgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi6K+36YCJ5oupbXA05qC85byP5paH5Lu277yBIik7CiAgICAgICAgICB0aGlzLmZpbGVMaXN0TVYgPSBbXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy51cGxvYWRGaWxlc1snbXYnXSA9IG12OwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGhhbmRsZU9yaWdpbmFsUmVtb3ZlKCkgewogICAgICBkZWxldGUgdGhpcy51cGxvYWRGaWxlcy5vcmlnaW5hbDsKICAgIH0sCiAgICBoYW5kbGVBY2NvbXBhbnlSZW1vdmUoKSB7CiAgICAgIGRlbGV0ZSB0aGlzLnVwbG9hZEZpbGVzLmFjY29tcGFueV9hY2NvbXBhbnk7CiAgICB9LAogICAgaGFuZGxlTHlyaWNSZW1vdmUoKSB7CiAgICAgIGRlbGV0ZSB0aGlzLnVwbG9hZEZpbGVzLmx5cmljOwogICAgfSwKICAgIGhhbmRsZU1WUmVtb3ZlKCkgewogICAgICBkZWxldGUgdGhpcy51cGxvYWRGaWxlcy5tdjsKICAgIH0sCiAgICBoYW5kbGVQcmV2aWV3KGZpbGUpIHsKICAgICAgY29uc29sZS5sb2coZmlsZS5yYXcpOwogICAgfSwKICAgIGJlZm9yZVJlbW92ZShmaWxlKSB7CiAgICAgIHJldHVybiB0aGlzLiRjb25maXJtKGDnoa7lrprnp7vpmaQgJHsgZmlsZS5uYW1lIH3vvJ9gKTsKICAgIH0sCiAgICBoYW5kbGVFeGNlZWQoKSB7CiAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6ZmQ5Yi26YCJ5oupIDEg5Liq5paH5Lu2Jyk7CiAgICB9LAogICAgY2xlYXJGaWxlcygpIHsKICAgICAgdGhpcy5maWxlTGlzdE9yaWdpbmFsID0gW107CiAgICAgIHRoaXMuZmlsZUxpc3RBY2NvbXBhbnkgPSBbXTsKICAgICAgdGhpcy5maWxlTGlzdEx5cmljID0gW107CiAgICAgIHRoaXMuZmlsZUxpc3RNViA9IFtdOwogICAgICB0aGlzLnVwbG9hZEZpbGVzID0ge307CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["AccompanySingForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AccompanySingForm.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <el-card shadow=\"never\" class=\"box-card\">\n    <div slot=\"header\" class=\"clearfix\">\n      <span>伴奏演唱模式</span>\n    </div>\n\n    <el-form :inline=\"true\" :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\">\n      <el-form-item label=\"原唱音频\" prop=\"original\">\n        <el-upload\n          class=\"upload-demo\"\n          action=\"https://jsonplaceholder.typicode.com/posts/\"\n          :on-change=\"onOriginalChange\"\n          :on-preview=\"handlePreview\"\n          :on-remove=\"handleOriginalRemove\"\n          :on-exceed=\"handleExceed\"\n          :limit=\"1\"\n          :before-remove=\"beforeRemove\"\n          :file-list=\"fileListOriginal\"\n          :auto-upload=\"false\"\n        >\n          <el-button size=\"small\" type=\"primary\">选择文件</el-button>\n        </el-upload>\n      </el-form-item>\n\n\n      <el-form-item label=\"伴奏音频\" prop=\"accompany\">\n        <el-upload\n          class=\"upload-demo\"\n          action=\"https://jsonplaceholder.typicode.com/posts/\"\n          :on-change=\"onAccompanyChange\"\n          :on-preview=\"handlePreview\"\n          :on-remove=\"handleAccompanyRemove\"\n          :on-exceed=\"handleExceed\"\n          :limit=\"1\"\n          :before-remove=\"beforeRemove\"\n          :file-list=\"fileListAccompany\"\n          :auto-upload=\"false\"\n        >\n          <el-button size=\"small\" type=\"primary\">选择文件</el-button>\n        </el-upload>\n      </el-form-item>\n\n      <el-form-item label=\"歌词\" prop=\"lyric\">\n        <el-upload\n          class=\"upload-demo\"\n          action=\"https://jsonplaceholder.typicode.com/posts/\"\n          :on-change=\"onLyricChange\"\n          :on-preview=\"handlePreview\"\n          :on-remove=\"handleLyricRemove\"\n          :on-exceed=\"handleExceed\"\n          :limit=\"1\"\n          :before-remove=\"beforeRemove\"\n          :file-list=\"fileListLyric\"\n          :auto-upload=\"false\"\n        >\n          <el-button size=\"small\" type=\"primary\">选择文件</el-button>\n        </el-upload>\n      </el-form-item>\n\n      <el-form-item label=\"MV\" prop=\"mv\">\n        <el-upload\n          class=\"upload-demo\"\n          action=\"https://jsonplaceholder.typicode.com/posts/\"\n          :on-change=\"onMVChange\"\n          :on-preview=\"handlePreview\"\n          :on-remove=\"handleMVRemove\"\n          :on-exceed=\"handleExceed\"\n          :limit=\"1\"\n          :before-remove=\"beforeRemove\"\n          :file-list=\"fileListMV\"\n          :auto-upload=\"false\">\n          <el-button size=\"small\" type=\"primary\">选择文件</el-button>\n        </el-upload>\n      </el-form-item>\n    </el-form>\n  </el-card>\n</template>\n\n<script>\nimport { getFileType } from '../utils/utils';\n\nexport default {\n  data() {\n    return {\n      uploadFiles: {},\n      fileListOriginal: [],\n      fileListAccompany: [],\n      fileListLyric: [],\n      fileListMV: [],\n      ruleForm: {},\n      rules: {\n        original: [\n          { required: true },\n        ],\n        accompany: [\n          { required: true, }\n        ],\n        lyric: [\n          { required: true, }\n        ],\n        mv: [\n          { required: true, }\n        ],\n      },\n    };\n  },\n\n  methods: {\n    onOriginalChange(file) {\n      if (file.raw) {\n        var original = file.raw;\n        const fileType = getFileType(original);\n        if (fileType !== 'wav') {\n          this.$message.error(\"请选择wav格式文件！\");\n          this.fileListOriginal = [];\n        } else {\n          this.uploadFiles['original'] = original;\n        }\n      }\n    },\n    onAccompanyChange(file) {\n      if (file.raw) {\n        var accompany = file.raw;\n        const fileType = getFileType(accompany);\n        if (fileType !== 'wav') {\n          this.$message.error(\"请选择wav格式文件！\");\n          this.fileListAccompany = [];\n        } else {\n          this.uploadFiles['accompany_accompany'] = accompany;\n        }\n      }\n    },\n    onLyricChange(file) {\n      if (file.raw) {\n        var lyric = file.raw;\n        const fileType = getFileType(lyric);\n        if (fileType !== 'lrc') {\n          this.$message.error(\"请选择lrc格式文件！\");\n          this.fileListLyric = [];\n        } else {\n          this.uploadFiles['lyric'] = lyric;\n        }\n      }\n    },\n    onMVChange(file) {\n      if (file.raw) {\n        var mv = file.raw;\n        const fileType = getFileType(mv);\n        if (fileType !== 'mp4') {\n          this.$message.error(\"请选择mp4格式文件！\");\n          this.fileListMV = [];\n        } else {\n          this.uploadFiles['mv'] = mv;\n        }\n      }\n    },\n    handleOriginalRemove() {\n      delete this.uploadFiles.original;\n    },\n    handleAccompanyRemove() {\n      delete this.uploadFiles.accompany_accompany;\n    },\n    handleLyricRemove() {\n      delete this.uploadFiles.lyric;\n    },\n    handleMVRemove() {\n      delete this.uploadFiles.mv;\n    },\n    handlePreview(file) {\n      console.log(file.raw);\n    },\n    beforeRemove(file) {\n      return this.$confirm(`确定移除 ${ file.name }？`);\n    },\n    handleExceed() {\n      this.$message.warning('限制选择 1 个文件');\n    },\n    clearFiles() {\n      this.fileListOriginal = [];\n      this.fileListAccompany = [];\n      this.fileListLyric = [];\n      this.fileListMV = [];\n      this.uploadFiles = {};\n    },\n  },\n};\n</script>\n\n"]}]}
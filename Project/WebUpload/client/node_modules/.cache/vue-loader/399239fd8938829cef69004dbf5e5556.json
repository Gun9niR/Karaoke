{"remainingRequest":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/src/components/InstrumentSingForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/src/components/InstrumentSingForm.vue","mtime":1619424242000},{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldEZpbGVUeXBlIH0gZnJvbSAnLi4vdXRpbHMvdXRpbHMnOwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1cGxvYWRGaWxlczoge30sCiAgICAgIHJ1bGVGb3JtOiB7fSwKICAgICAgZmlsZUxpc3RJbnN0cnVtZW50OiBbXSwKICAgICAgZmlsZUxpc3RBY2NvbXBhbnk6IFtdLAogICAgICBydWxlczogewogICAgICAgICAgaW5zdHJ1bWVudDogWwogICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlIH0sCiAgICAgICAgICBdLAogICAgICAgICAgYWNjb21wYW55OiBbCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIH0KICAgICAgICAgIF0sCiAgICAgIH0sCiAgICB9OwogIH0sCgogIG1ldGhvZHM6IHsKICAgIG9uSW5zdHJ1bWVudENoYW5nZShmaWxlKSB7CiAgICAgIGlmIChmaWxlLnJhdykgewogICAgICAgIHZhciBpbnN0cnVtZW50ID0gZmlsZS5yYXc7CiAgICAgICAgY29uc3QgZmlsZVR5cGUgPSBnZXRGaWxlVHlwZShpbnN0cnVtZW50KTsKICAgICAgICBpZiAoZmlsZVR5cGUgIT09ICd0eHQnKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLor7fpgInmi6l0eHTmoLzlvI/mlofku7bvvIEiKTsKICAgICAgICAgIHRoaXMuZmlsZUxpc3RJbnN0cnVtZW50ID0gW107CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMudXBsb2FkRmlsZXNbJ2luc3RydW1lbnQnXSA9IGluc3RydW1lbnQ7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgb25BY2NvbXBhbnlDaGFuZ2UoZmlsZSkgewogICAgICBpZiAoZmlsZS5yYXcpIHsKICAgICAgICB2YXIgYWNjb21wYW55ID0gZmlsZS5yYXc7CiAgICAgICAgY29uc3QgZmlsZVR5cGUgPSBnZXRGaWxlVHlwZShhY2NvbXBhbnkpOwogICAgICAgIGlmIChmaWxlVHlwZSAhPT0gJ3dhdicpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuivt+mAieaLqXdhduagvOW8j+aWh+S7tu+8gSIpOwogICAgICAgICAgdGhpcy5maWxlTGlzdEFjY29tcGFueSA9IFtdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnVwbG9hZEZpbGVzWydhY2NvbXBhbnlfaW5zdHJ1bWVudCddID0gYWNjb21wYW55OwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGhhbmRsZUluc3RydW1lbnRSZW1vdmUoKSB7CiAgICAgIGRlbGV0ZSB0aGlzLnVwbG9hZEZpbGVzLmluc3RydW1lbnQ7CiAgICB9LAogICAgaGFuZGxlQWNjb21wYW55UmVtb3ZlKCkgewogICAgICBkZWxldGUgdGhpcy51cGxvYWRGaWxlcy5hY2NvbXBhbnlfaW5zdHJ1bWVudDsKICAgIH0sCiAgICBoYW5kbGVQcmV2aWV3KGZpbGUpIHsKICAgICAgY29uc29sZS5sb2coZmlsZSk7CiAgICB9LAogICAgaGFuZGxlRXhjZWVkKCkgewogICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+mZkOWItumAieaLqSAxIOS4quaWh+S7ticpOwogICAgfSwKICAgIGJlZm9yZVJlbW92ZShmaWxlKSB7CiAgICAgIHJldHVybiB0aGlzLiRjb25maXJtKGDnoa7lrprnp7vpmaQgJHsgZmlsZS5uYW1lIH3vvJ9gKTsKICAgIH0sCiAgICBjbGVhckZpbGVzKCkgewogICAgICB0aGlzLmZpbGVMaXN0SW5zdHJ1bWVudCA9IFtdOwogICAgICB0aGlzLmZpbGVMaXN0QWNjb21wYW55ID0gW107CiAgICAgIHRoaXMudXBsb2FkRmlsZXMgPSB7fTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["InstrumentSingForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"InstrumentSingForm.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <el-card shadow=\"never\" class=\"box-card\">\n    <div slot=\"header\" class=\"clearfix\">\n      <span>自弹自唱模式</span>\n    </div>\n\n    <el-form :inline=\"true\" :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\">\n      \n      <el-form-item label=\"和弦\" prop=\"instrument\">\n        <el-upload\n          class=\"upload-demo\"\n          action=\"https://jsonplaceholder.typicode.com/posts/\"\n          :on-change=\"onInstrumentChange\"\n          :on-preview=\"handlePreview\"\n          :on-remove=\"handleInstrumentRemove\"\n          :on-exceed=\"handleExceed\"\n          :limit=\"1\"\n          :before-remove=\"beforeRemove\"\n          :file-list=\"fileListInstrument\"\n          :auto-upload=\"false\"\n        >\n          <el-button size=\"small\" type=\"primary\">选择文件</el-button>\n        </el-upload>\n      </el-form-item>\n\n\n      <el-form-item label=\"伴奏\" prop=\"accompany\">\n        <el-upload\n          class=\"upload-demo\"\n          action=\"https://jsonplaceholder.typicode.com/posts/\"\n          :on-change=\"onAccompanyChange\"\n          :on-preview=\"handlePreview\"\n          :on-remove=\"handleAccompanyRemove\"\n          :on-exceed=\"handleExceed\"\n          :limit=\"1\"\n          :before-remove=\"beforeRemove\"\n          :file-list=\"fileListAccompany\"\n          :auto-upload=\"false\"\n        >\n          <el-button size=\"small\" type=\"primary\">选择文件</el-button>\n        </el-upload>\n      </el-form-item>\n\n    </el-form>\n  </el-card>\n</template>\n\n<script>\nimport { getFileType } from '../utils/utils';\n\nexport default {\n  data() {\n    return {\n      uploadFiles: {},\n      ruleForm: {},\n      fileListInstrument: [],\n      fileListAccompany: [],\n      rules: {\n          instrument: [\n            { required: true },\n          ],\n          accompany: [\n            { required: true, }\n          ],\n      },\n    };\n  },\n\n  methods: {\n    onInstrumentChange(file) {\n      if (file.raw) {\n        var instrument = file.raw;\n        const fileType = getFileType(instrument);\n        if (fileType !== 'txt') {\n          this.$message.error(\"请选择txt格式文件！\");\n          this.fileListInstrument = [];\n        } else {\n          this.uploadFiles['instrument'] = instrument;\n        }\n      }\n    },\n    onAccompanyChange(file) {\n      if (file.raw) {\n        var accompany = file.raw;\n        const fileType = getFileType(accompany);\n        if (fileType !== 'wav') {\n          this.$message.error(\"请选择wav格式文件！\");\n          this.fileListAccompany = [];\n        } else {\n          this.uploadFiles['accompany_instrument'] = accompany;\n        }\n      }\n    },\n    handleInstrumentRemove() {\n      delete this.uploadFiles.instrument;\n    },\n    handleAccompanyRemove() {\n      delete this.uploadFiles.accompany_instrument;\n    },\n    handlePreview(file) {\n      console.log(file);\n    },\n    handleExceed() {\n      this.$message.warning('限制选择 1 个文件');\n    },\n    beforeRemove(file) {\n      return this.$confirm(`确定移除 ${ file.name }？`);\n    },\n    clearFiles() {\n      this.fileListInstrument = [];\n      this.fileListAccompany = [];\n      this.uploadFiles = {};\n    },\n  },\n};\n</script>\n\n"]}]}
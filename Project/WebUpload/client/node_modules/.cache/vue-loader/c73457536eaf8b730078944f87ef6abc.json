{"remainingRequest":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/src/components/Login.vue?vue&type=style&index=0&id=ef68022e&scoped=true&lang=css&","dependencies":[{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/src/components/Login.vue","mtime":1616253354000},{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKI2xvZ2luLWNhcmQgewogIG1heC13aWR0aDogNTAwcHg7CiAgbWF4LWhlaWdodDogMzUwcHg7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogMDsKICByaWdodDogMDsKICBib3R0b206IDA7CiAgbGVmdDogMDsKICBtYXJnaW46IGF1dG87Cn0KCiN0aXRsZS13cmFwcGVyIHsKICBtYXJnaW46IDM1cHg7CiAgZm9udC1zaXplOiAxOC41cHg7Cn0KCiNsb2dpbi1mb3JtLXdyYXBwZXIgewogIG1heC13aWR0aDogNDMwcHg7CiAgbWFyZ2luOiAwIGF1dG87CiAgcGFkZGluZy1yaWdodDogNTBweDsKfQoKI2J1dHRvbi13cmFwcGVyIHsKICBtYXJnaW46IDAsIGF1dG87CiAgcGFkZGluZy1yaWdodDogNDBweDsKfQoKI2xvZ2luLWNhcmQgewogIHRleHQtYWxpZ246IGNlbnRlcjsKfQo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <alert v-if=\"showErrorMessage\"></alert>\n\n    <el-card class=\"box-card\" id=\"login-card\">\n      <div id=\"title-wrapper\"><h2>管理员登录</h2></div>\n\n      <div id=\"login-form-wrapper\">\n        <el-form\n          :model=\"ruleForm\"\n          status-icon\n          :rules=\"rules\"\n          ref=\"ruleForm\"\n          label-width=\"100px\"\n          class=\"demo-ruleForm\"\n        >\n          <el-form-item label=\"用户名\" prop=\"name\">\n            <el-input v-model=\"ruleForm.name\" autocomplete=\"off\"></el-input>\n          </el-form-item>\n\n          <el-form-item label=\"密码\" prop=\"pass\">\n            <el-input\n              type=\"password\"\n              v-model=\"ruleForm.pass\"\n              autocomplete=\"off\"\n            ></el-input>\n          </el-form-item>\n\n          <el-form-item id=\"button-wrapper\">\n            <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">登录</el-button>\n            <el-button @click=\"resetForm('ruleForm')\">清空</el-button>\n          </el-form-item>\n        </el-form>\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport Alert from \"./Alert\";\n\nexport default {\n  data() {\n    var validateName = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请输入用户名\"));\n      } else {\n        if (this.ruleForm.pass !== \"\") {\n          this.$refs.ruleForm.validateField(\"pass\");\n        }\n        callback();\n      }\n    };\n\n    var validatePass = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请输入密码\"));\n      } else {\n        callback();\n      }\n    };\n\n    return {\n      showErrorMessage: false,\n      ruleForm: {\n        name: \"\",\n        pass: \"\",\n      },\n      rules: {\n        name: [{ validator: validateName, trigger: \"blur\" }],\n        pass: [{ validator: validatePass, trigger: \"blur\" }],\n      },\n    };\n  },\n\n  components: {\n    alert: Alert,\n  },\n\n  methods: {\n    verify(payload) {\n      axios\n        .post(\"/verify\", payload)\n        .then((res) => {\n          if (res.data.status === 0) {\n            this.$router.push({ path: \"/upload\" });\n            this.$store.commit(\"login\");\n            // var expire = 5000;\n            // setTimeout(() => {\n            //   this.$store.commit(\"loginExpire\");\n            // }, expire);\n          } else {\n            this.showErrorMessage = true;\n          }\n        })\n        .catch(() => {\n          alert(\"Error! There may be something wrong!\");\n        });\n    },\n\n    initForm() {\n      this.ruleForm.name = \"\";\n      this.ruleForm.pass = \"\";\n    },\n\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          const payload = {\n            name: this.ruleForm.name,\n            password: this.ruleForm.pass,\n          };\n          this.verify(payload);\n          this.initForm();\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n  },\n};\n</script>\n\n<style scoped>\n#login-card {\n  max-width: 500px;\n  max-height: 350px;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  margin: auto;\n}\n\n#title-wrapper {\n  margin: 35px;\n  font-size: 18.5px;\n}\n\n#login-form-wrapper {\n  max-width: 430px;\n  margin: 0 auto;\n  padding-right: 50px;\n}\n\n#button-wrapper {\n  margin: 0, auto;\n  padding-right: 40px;\n}\n\n#login-card {\n  text-align: center;\n}\n</style>\n"]}]}
{"remainingRequest":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/src/components/RatingForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/src/components/RatingForm.vue","mtime":1619513823000},{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldEZpbGVUeXBlIH0gZnJvbSAnLi4vdXRpbHMvdXRpbHMnOwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1cGxvYWRGaWxlczoge30sCiAgICAgIGZpbGVMaXN0UmF0ZTogW10sCiAgICAgIHJ1bGVGb3JtOiB7fSwKICAgICAgcnVsZXM6IHsKICAgICAgICByYXRlOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlIH0sCiAgICAgICAgXSwKICAgICAgfQogICAgfTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBvblJhdGVDaGFuZ2UoZmlsZSkgewogICAgICBpZiAoZmlsZS5yYXcpIHsKICAgICAgICBsZXQgcmF0ZSA9IGZpbGUucmF3OwogICAgICAgIGNvbnN0IGZpbGVUeXBlID0gZ2V0RmlsZVR5cGUocmF0ZSk7CiAgICAgICAgaWYgKGZpbGVUeXBlICE9PSAnd2F2JykgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi6K+36YCJ5oupd2F25qC85byP5paH5Lu277yBIik7CiAgICAgICAgICB0aGlzLmZpbGVMaXN0UmF0ZSA9IFtdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnVwbG9hZEZpbGVzWydyYXRlJ10gPSByYXRlOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGhhbmRsZVJhdGVSZW1vdmUoKSB7CiAgICAgIGRlbGV0ZSB0aGlzLnVwbG9hZEZpbGVzLnJhdGU7CiAgICB9LAogICAgYmVmb3JlUmVtb3ZlKGZpbGUpIHsKICAgICAgcmV0dXJuIHRoaXMuJGNvbmZpcm0oYOehruWumuenu+mZpCAkeyBmaWxlLm5hbWUgfe+8n2ApOwogICAgfSwKICAgIGhhbmRsZUV4Y2VlZCgpIHsKICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfpmZDliLbpgInmi6kgMSDkuKrmlofku7YnKTsKICAgIH0sCiAgICBjbGVhckZpbGVzKCkgewogICAgICB0aGlzLmZpbGVMaXN0UmF0ZSA9IFtdOwogICAgICB0aGlzLnVwbG9hZEZpbGVzID0ge307CiAgICB9LAogIH0KfQo="},{"version":3,"sources":["RatingForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RatingForm.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <el-card shadow=\"never\" class=\"box-card\">\n    <div slot=\"header\" class=\"clearfix\">\n      <span>歌曲打分</span>\n    </div>\n\n    <el-form :inline=\"true\" :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\">\n      <el-form-item label=\"人声音频\" prop=\"rate\">\n        <el-upload\n          class=\"upload-demo\"\n          action=\"https://jsonplaceholder.typicode.com/posts/\"\n          :on-change=\"onRateChange\"\n          :on-remove=\"handleRateRemove\"\n          :on-exceed=\"handleExceed\"\n          :limit=\"1\"\n          :before-remove=\"beforeRemove\"\n          :file-list=\"fileListRate\"\n          :auto-upload=\"false\"\n        >\n          <el-button size=\"small\" type=\"primary\">选择文件</el-button>\n        </el-upload>\n      </el-form-item>\n    </el-form>\n\n  </el-card>\n</template>\n\n<script>\nimport { getFileType } from '../utils/utils';\n\nexport default {\n  data() {\n    return {\n      uploadFiles: {},\n      fileListRate: [],\n      ruleForm: {},\n      rules: {\n        rate: [\n          { required: true },\n        ],\n      }\n    };\n  },\n\n  methods: {\n    onRateChange(file) {\n      if (file.raw) {\n        let rate = file.raw;\n        const fileType = getFileType(rate);\n        if (fileType !== 'wav') {\n          this.$message.error(\"请选择wav格式文件！\");\n          this.fileListRate = [];\n        } else {\n          this.uploadFiles['rate'] = rate;\n        }\n      }\n    },\n    handleRateRemove() {\n      delete this.uploadFiles.rate;\n    },\n    beforeRemove(file) {\n      return this.$confirm(`确定移除 ${ file.name }？`);\n    },\n    handleExceed() {\n      this.$message.warning('限制选择 1 个文件');\n    },\n    clearFiles() {\n      this.fileListRate = [];\n      this.uploadFiles = {};\n    },\n  }\n}\n</script>\n"]}]}
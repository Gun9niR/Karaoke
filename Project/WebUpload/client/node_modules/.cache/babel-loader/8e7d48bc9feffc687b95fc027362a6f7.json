{"remainingRequest":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/babel-loader/lib/index.js!/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/src/components/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/src/components/Login.vue","mtime":1616253354000},{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBBbGVydCBmcm9tICIuL0FsZXJ0IjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHZhciB2YWxpZGF0ZU5hbWUgPSBmdW5jdGlvbiB2YWxpZGF0ZU5hbWUocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSB7CiAgICAgIGlmICh2YWx1ZSA9PT0gIiIpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuivt+i+k+WFpeeUqOaIt+WQjSIpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoX3RoaXMucnVsZUZvcm0ucGFzcyAhPT0gIiIpIHsKICAgICAgICAgIF90aGlzLiRyZWZzLnJ1bGVGb3JtLnZhbGlkYXRlRmllbGQoInBhc3MiKTsKICAgICAgICB9CgogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0KICAgIH07CgogICAgdmFyIHZhbGlkYXRlUGFzcyA9IGZ1bmN0aW9uIHZhbGlkYXRlUGFzcyhydWxlLCB2YWx1ZSwgY2FsbGJhY2spIHsKICAgICAgaWYgKHZhbHVlID09PSAiIikgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi6K+36L6T5YWl5a+G56CBIikpOwogICAgICB9IGVsc2UgewogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0KICAgIH07CgogICAgcmV0dXJuIHsKICAgICAgc2hvd0Vycm9yTWVzc2FnZTogZmFsc2UsCiAgICAgIHJ1bGVGb3JtOiB7CiAgICAgICAgbmFtZTogIiIsCiAgICAgICAgcGFzczogIiIKICAgICAgfSwKICAgICAgcnVsZXM6IHsKICAgICAgICBuYW1lOiBbewogICAgICAgICAgdmFsaWRhdG9yOiB2YWxpZGF0ZU5hbWUsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XSwKICAgICAgICBwYXNzOiBbewogICAgICAgICAgdmFsaWRhdG9yOiB2YWxpZGF0ZVBhc3MsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XQogICAgICB9CiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgYWxlcnQ6IEFsZXJ0CiAgfSwKICBtZXRob2RzOiB7CiAgICB2ZXJpZnk6IGZ1bmN0aW9uIHZlcmlmeShwYXlsb2FkKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgYXhpb3MucG9zdCgiL3ZlcmlmeSIsIHBheWxvYWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXMgPT09IDApIHsKICAgICAgICAgIF90aGlzMi4kcm91dGVyLnB1c2goewogICAgICAgICAgICBwYXRoOiAiL3VwbG9hZCIKICAgICAgICAgIH0pOwoKICAgICAgICAgIF90aGlzMi4kc3RvcmUuY29tbWl0KCJsb2dpbiIpOyAvLyB2YXIgZXhwaXJlID0gNTAwMDsKICAgICAgICAgIC8vIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgLy8gICB0aGlzLiRzdG9yZS5jb21taXQoImxvZ2luRXhwaXJlIik7CiAgICAgICAgICAvLyB9LCBleHBpcmUpOwoKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMyLnNob3dFcnJvck1lc3NhZ2UgPSB0cnVlOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIGFsZXJ0KCJFcnJvciEgVGhlcmUgbWF5IGJlIHNvbWV0aGluZyB3cm9uZyEiKTsKICAgICAgfSk7CiAgICB9LAogICAgaW5pdEZvcm06IGZ1bmN0aW9uIGluaXRGb3JtKCkgewogICAgICB0aGlzLnJ1bGVGb3JtLm5hbWUgPSAiIjsKICAgICAgdGhpcy5ydWxlRm9ybS5wYXNzID0gIiI7CiAgICB9LAogICAgc3VibWl0Rm9ybTogZnVuY3Rpb24gc3VibWl0Rm9ybShmb3JtTmFtZSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgdmFyIHBheWxvYWQgPSB7CiAgICAgICAgICAgIG5hbWU6IF90aGlzMy5ydWxlRm9ybS5uYW1lLAogICAgICAgICAgICBwYXNzd29yZDogX3RoaXMzLnJ1bGVGb3JtLnBhc3MKICAgICAgICAgIH07CgogICAgICAgICAgX3RoaXMzLnZlcmlmeShwYXlsb2FkKTsKCiAgICAgICAgICBfdGhpczMuaW5pdEZvcm0oKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2coImVycm9yIHN1Ym1pdCEhIik7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICByZXNldEZvcm06IGZ1bmN0aW9uIHJlc2V0Rm9ybShmb3JtTmFtZSkgewogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS5yZXNldEZpZWxkcygpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <alert v-if=\"showErrorMessage\"></alert>\n\n    <el-card class=\"box-card\" id=\"login-card\">\n      <div id=\"title-wrapper\"><h2>管理员登录</h2></div>\n\n      <div id=\"login-form-wrapper\">\n        <el-form\n          :model=\"ruleForm\"\n          status-icon\n          :rules=\"rules\"\n          ref=\"ruleForm\"\n          label-width=\"100px\"\n          class=\"demo-ruleForm\"\n        >\n          <el-form-item label=\"用户名\" prop=\"name\">\n            <el-input v-model=\"ruleForm.name\" autocomplete=\"off\"></el-input>\n          </el-form-item>\n\n          <el-form-item label=\"密码\" prop=\"pass\">\n            <el-input\n              type=\"password\"\n              v-model=\"ruleForm.pass\"\n              autocomplete=\"off\"\n            ></el-input>\n          </el-form-item>\n\n          <el-form-item id=\"button-wrapper\">\n            <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">登录</el-button>\n            <el-button @click=\"resetForm('ruleForm')\">清空</el-button>\n          </el-form-item>\n        </el-form>\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport Alert from \"./Alert\";\n\nexport default {\n  data() {\n    var validateName = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请输入用户名\"));\n      } else {\n        if (this.ruleForm.pass !== \"\") {\n          this.$refs.ruleForm.validateField(\"pass\");\n        }\n        callback();\n      }\n    };\n\n    var validatePass = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请输入密码\"));\n      } else {\n        callback();\n      }\n    };\n\n    return {\n      showErrorMessage: false,\n      ruleForm: {\n        name: \"\",\n        pass: \"\",\n      },\n      rules: {\n        name: [{ validator: validateName, trigger: \"blur\" }],\n        pass: [{ validator: validatePass, trigger: \"blur\" }],\n      },\n    };\n  },\n\n  components: {\n    alert: Alert,\n  },\n\n  methods: {\n    verify(payload) {\n      axios\n        .post(\"/verify\", payload)\n        .then((res) => {\n          if (res.data.status === 0) {\n            this.$router.push({ path: \"/upload\" });\n            this.$store.commit(\"login\");\n            // var expire = 5000;\n            // setTimeout(() => {\n            //   this.$store.commit(\"loginExpire\");\n            // }, expire);\n          } else {\n            this.showErrorMessage = true;\n          }\n        })\n        .catch(() => {\n          alert(\"Error! There may be something wrong!\");\n        });\n    },\n\n    initForm() {\n      this.ruleForm.name = \"\";\n      this.ruleForm.pass = \"\";\n    },\n\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          const payload = {\n            name: this.ruleForm.name,\n            password: this.ruleForm.pass,\n          };\n          this.verify(payload);\n          this.initForm();\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n  },\n};\n</script>\n\n<style scoped>\n#login-card {\n  max-width: 500px;\n  max-height: 350px;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  margin: auto;\n}\n\n#title-wrapper {\n  margin: 35px;\n  font-size: 18.5px;\n}\n\n#login-form-wrapper {\n  max-width: 430px;\n  margin: 0 auto;\n  padding-right: 50px;\n}\n\n#button-wrapper {\n  margin: 0, auto;\n  padding-right: 40px;\n}\n\n#login-card {\n  text-align: center;\n}\n</style>\n"],"sourceRoot":"src/components"}]}
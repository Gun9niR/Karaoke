{"remainingRequest":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/babel-loader/lib/index.js!/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/src/components/InstrumentSingForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/src/components/InstrumentSingForm.vue","mtime":1619424242000},{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGdldEZpbGVUeXBlIH0gZnJvbSAnLi4vdXRpbHMvdXRpbHMnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVwbG9hZEZpbGVzOiB7fSwKICAgICAgcnVsZUZvcm06IHt9LAogICAgICBmaWxlTGlzdEluc3RydW1lbnQ6IFtdLAogICAgICBmaWxlTGlzdEFjY29tcGFueTogW10sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgaW5zdHJ1bWVudDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgfV0sCiAgICAgICAgYWNjb21wYW55OiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICB9XQogICAgICB9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgb25JbnN0cnVtZW50Q2hhbmdlOiBmdW5jdGlvbiBvbkluc3RydW1lbnRDaGFuZ2UoZmlsZSkgewogICAgICBpZiAoZmlsZS5yYXcpIHsKICAgICAgICB2YXIgaW5zdHJ1bWVudCA9IGZpbGUucmF3OwogICAgICAgIHZhciBmaWxlVHlwZSA9IGdldEZpbGVUeXBlKGluc3RydW1lbnQpOwoKICAgICAgICBpZiAoZmlsZVR5cGUgIT09ICd0eHQnKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLor7fpgInmi6l0eHTmoLzlvI/mlofku7bvvIEiKTsKICAgICAgICAgIHRoaXMuZmlsZUxpc3RJbnN0cnVtZW50ID0gW107CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMudXBsb2FkRmlsZXNbJ2luc3RydW1lbnQnXSA9IGluc3RydW1lbnQ7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgb25BY2NvbXBhbnlDaGFuZ2U6IGZ1bmN0aW9uIG9uQWNjb21wYW55Q2hhbmdlKGZpbGUpIHsKICAgICAgaWYgKGZpbGUucmF3KSB7CiAgICAgICAgdmFyIGFjY29tcGFueSA9IGZpbGUucmF3OwogICAgICAgIHZhciBmaWxlVHlwZSA9IGdldEZpbGVUeXBlKGFjY29tcGFueSk7CgogICAgICAgIGlmIChmaWxlVHlwZSAhPT0gJ3dhdicpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuivt+mAieaLqXdhduagvOW8j+aWh+S7tu+8gSIpOwogICAgICAgICAgdGhpcy5maWxlTGlzdEFjY29tcGFueSA9IFtdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnVwbG9hZEZpbGVzWydhY2NvbXBhbnlfaW5zdHJ1bWVudCddID0gYWNjb21wYW55OwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGhhbmRsZUluc3RydW1lbnRSZW1vdmU6IGZ1bmN0aW9uIGhhbmRsZUluc3RydW1lbnRSZW1vdmUoKSB7CiAgICAgIGRlbGV0ZSB0aGlzLnVwbG9hZEZpbGVzLmluc3RydW1lbnQ7CiAgICB9LAogICAgaGFuZGxlQWNjb21wYW55UmVtb3ZlOiBmdW5jdGlvbiBoYW5kbGVBY2NvbXBhbnlSZW1vdmUoKSB7CiAgICAgIGRlbGV0ZSB0aGlzLnVwbG9hZEZpbGVzLmFjY29tcGFueV9pbnN0cnVtZW50OwogICAgfSwKICAgIGhhbmRsZVByZXZpZXc6IGZ1bmN0aW9uIGhhbmRsZVByZXZpZXcoZmlsZSkgewogICAgICBjb25zb2xlLmxvZyhmaWxlKTsKICAgIH0sCiAgICBoYW5kbGVFeGNlZWQ6IGZ1bmN0aW9uIGhhbmRsZUV4Y2VlZCgpIHsKICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfpmZDliLbpgInmi6kgMSDkuKrmlofku7YnKTsKICAgIH0sCiAgICBiZWZvcmVSZW1vdmU6IGZ1bmN0aW9uIGJlZm9yZVJlbW92ZShmaWxlKSB7CiAgICAgIHJldHVybiB0aGlzLiRjb25maXJtKCJcdTc4NkVcdTVCOUFcdTc5RkJcdTk2NjQgIi5jb25jYXQoZmlsZS5uYW1lLCAiXHVGRjFGIikpOwogICAgfSwKICAgIGNsZWFyRmlsZXM6IGZ1bmN0aW9uIGNsZWFyRmlsZXMoKSB7CiAgICAgIHRoaXMuZmlsZUxpc3RJbnN0cnVtZW50ID0gW107CiAgICAgIHRoaXMuZmlsZUxpc3RBY2NvbXBhbnkgPSBbXTsKICAgICAgdGhpcy51cGxvYWRGaWxlcyA9IHt9OwogICAgfQogIH0KfTs="},{"version":3,"sources":["InstrumentSingForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA,SAAA,WAAA,QAAA,gBAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA,EAFA;AAGA,MAAA,kBAAA,EAAA,EAHA;AAIA,MAAA,iBAAA,EAAA,EAJA;AAKA,MAAA,KAAA,EAAA;AACA,QAAA,UAAA,EAAA,CACA;AAAA,UAAA,QAAA,EAAA;AAAA,SADA,CADA;AAIA,QAAA,SAAA,EAAA,CACA;AAAA,UAAA,QAAA,EAAA;AAAA,SADA;AAJA;AALA,KAAA;AAcA,GAhBA;AAkBA,EAAA,OAAA,EAAA;AACA,IAAA,kBADA,8BACA,IADA,EACA;AACA,UAAA,IAAA,CAAA,GAAA,EAAA;AACA,YAAA,UAAA,GAAA,IAAA,CAAA,GAAA;AACA,YAAA,QAAA,GAAA,WAAA,CAAA,UAAA,CAAA;;AACA,YAAA,QAAA,KAAA,KAAA,EAAA;AACA,eAAA,QAAA,CAAA,KAAA,CAAA,aAAA;AACA,eAAA,kBAAA,GAAA,EAAA;AACA,SAHA,MAGA;AACA,eAAA,WAAA,CAAA,YAAA,IAAA,UAAA;AACA;AACA;AACA,KAZA;AAaA,IAAA,iBAbA,6BAaA,IAbA,EAaA;AACA,UAAA,IAAA,CAAA,GAAA,EAAA;AACA,YAAA,SAAA,GAAA,IAAA,CAAA,GAAA;AACA,YAAA,QAAA,GAAA,WAAA,CAAA,SAAA,CAAA;;AACA,YAAA,QAAA,KAAA,KAAA,EAAA;AACA,eAAA,QAAA,CAAA,KAAA,CAAA,aAAA;AACA,eAAA,iBAAA,GAAA,EAAA;AACA,SAHA,MAGA;AACA,eAAA,WAAA,CAAA,sBAAA,IAAA,SAAA;AACA;AACA;AACA,KAxBA;AAyBA,IAAA,sBAzBA,oCAyBA;AACA,aAAA,KAAA,WAAA,CAAA,UAAA;AACA,KA3BA;AA4BA,IAAA,qBA5BA,mCA4BA;AACA,aAAA,KAAA,WAAA,CAAA,oBAAA;AACA,KA9BA;AA+BA,IAAA,aA/BA,yBA+BA,IA/BA,EA+BA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA,KAjCA;AAkCA,IAAA,YAlCA,0BAkCA;AACA,WAAA,QAAA,CAAA,OAAA,CAAA,YAAA;AACA,KApCA;AAqCA,IAAA,YArCA,wBAqCA,IArCA,EAqCA;AACA,aAAA,KAAA,QAAA,oCAAA,IAAA,CAAA,IAAA,YAAA;AACA,KAvCA;AAwCA,IAAA,UAxCA,wBAwCA;AACA,WAAA,kBAAA,GAAA,EAAA;AACA,WAAA,iBAAA,GAAA,EAAA;AACA,WAAA,WAAA,GAAA,EAAA;AACA;AA5CA;AAlBA,CAAA","sourcesContent":["<template>\n  <el-card shadow=\"never\" class=\"box-card\">\n    <div slot=\"header\" class=\"clearfix\">\n      <span>自弹自唱模式</span>\n    </div>\n\n    <el-form :inline=\"true\" :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\">\n      \n      <el-form-item label=\"和弦\" prop=\"instrument\">\n        <el-upload\n          class=\"upload-demo\"\n          action=\"https://jsonplaceholder.typicode.com/posts/\"\n          :on-change=\"onInstrumentChange\"\n          :on-preview=\"handlePreview\"\n          :on-remove=\"handleInstrumentRemove\"\n          :on-exceed=\"handleExceed\"\n          :limit=\"1\"\n          :before-remove=\"beforeRemove\"\n          :file-list=\"fileListInstrument\"\n          :auto-upload=\"false\"\n        >\n          <el-button size=\"small\" type=\"primary\">选择文件</el-button>\n        </el-upload>\n      </el-form-item>\n\n\n      <el-form-item label=\"伴奏\" prop=\"accompany\">\n        <el-upload\n          class=\"upload-demo\"\n          action=\"https://jsonplaceholder.typicode.com/posts/\"\n          :on-change=\"onAccompanyChange\"\n          :on-preview=\"handlePreview\"\n          :on-remove=\"handleAccompanyRemove\"\n          :on-exceed=\"handleExceed\"\n          :limit=\"1\"\n          :before-remove=\"beforeRemove\"\n          :file-list=\"fileListAccompany\"\n          :auto-upload=\"false\"\n        >\n          <el-button size=\"small\" type=\"primary\">选择文件</el-button>\n        </el-upload>\n      </el-form-item>\n\n    </el-form>\n  </el-card>\n</template>\n\n<script>\nimport { getFileType } from '../utils/utils';\n\nexport default {\n  data() {\n    return {\n      uploadFiles: {},\n      ruleForm: {},\n      fileListInstrument: [],\n      fileListAccompany: [],\n      rules: {\n          instrument: [\n            { required: true },\n          ],\n          accompany: [\n            { required: true, }\n          ],\n      },\n    };\n  },\n\n  methods: {\n    onInstrumentChange(file) {\n      if (file.raw) {\n        var instrument = file.raw;\n        const fileType = getFileType(instrument);\n        if (fileType !== 'txt') {\n          this.$message.error(\"请选择txt格式文件！\");\n          this.fileListInstrument = [];\n        } else {\n          this.uploadFiles['instrument'] = instrument;\n        }\n      }\n    },\n    onAccompanyChange(file) {\n      if (file.raw) {\n        var accompany = file.raw;\n        const fileType = getFileType(accompany);\n        if (fileType !== 'wav') {\n          this.$message.error(\"请选择wav格式文件！\");\n          this.fileListAccompany = [];\n        } else {\n          this.uploadFiles['accompany_instrument'] = accompany;\n        }\n      }\n    },\n    handleInstrumentRemove() {\n      delete this.uploadFiles.instrument;\n    },\n    handleAccompanyRemove() {\n      delete this.uploadFiles.accompany_instrument;\n    },\n    handlePreview(file) {\n      console.log(file);\n    },\n    handleExceed() {\n      this.$message.warning('限制选择 1 个文件');\n    },\n    beforeRemove(file) {\n      return this.$confirm(`确定移除 ${ file.name }？`);\n    },\n    clearFiles() {\n      this.fileListInstrument = [];\n      this.fileListAccompany = [];\n      this.uploadFiles = {};\n    },\n  },\n};\n</script>\n\n"],"sourceRoot":"src/components"}]}
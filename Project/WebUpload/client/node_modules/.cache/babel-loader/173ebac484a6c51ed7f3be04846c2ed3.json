{"remainingRequest":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/babel-loader/lib/index.js!/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/src/components/AccompanySingForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/src/components/AccompanySingForm.vue","mtime":1619445057000},{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/david/Study/SJTU/Courses/SE/Karaoke/Project/WebUpload/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGdldEZpbGVUeXBlIH0gZnJvbSAnLi4vdXRpbHMvdXRpbHMnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVwbG9hZEZpbGVzOiB7fSwKICAgICAgZmlsZUxpc3RPcmlnaW5hbDogW10sCiAgICAgIGZpbGVMaXN0QWNjb21wYW55OiBbXSwKICAgICAgZmlsZUxpc3RMeXJpYzogW10sCiAgICAgIGZpbGVMaXN0TVY6IFtdLAogICAgICBydWxlRm9ybToge30sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgb3JpZ2luYWw6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgIH1dLAogICAgICAgIGFjY29tcGFueTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgfV0sCiAgICAgICAgbHlyaWM6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgIH1dLAogICAgICAgIG12OiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICB9XQogICAgICB9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgb25PcmlnaW5hbENoYW5nZTogZnVuY3Rpb24gb25PcmlnaW5hbENoYW5nZShmaWxlKSB7CiAgICAgIGlmIChmaWxlLnJhdykgewogICAgICAgIHZhciBvcmlnaW5hbCA9IGZpbGUucmF3OwogICAgICAgIHZhciBmaWxlVHlwZSA9IGdldEZpbGVUeXBlKG9yaWdpbmFsKTsKCiAgICAgICAgaWYgKGZpbGVUeXBlICE9PSAnd2F2JykgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi6K+36YCJ5oupd2F25qC85byP5paH5Lu277yBIik7CiAgICAgICAgICB0aGlzLmZpbGVMaXN0T3JpZ2luYWwgPSBbXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy51cGxvYWRGaWxlc1snb3JpZ2luYWwnXSA9IG9yaWdpbmFsOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIG9uQWNjb21wYW55Q2hhbmdlOiBmdW5jdGlvbiBvbkFjY29tcGFueUNoYW5nZShmaWxlKSB7CiAgICAgIGlmIChmaWxlLnJhdykgewogICAgICAgIHZhciBhY2NvbXBhbnkgPSBmaWxlLnJhdzsKICAgICAgICB2YXIgZmlsZVR5cGUgPSBnZXRGaWxlVHlwZShhY2NvbXBhbnkpOwoKICAgICAgICBpZiAoZmlsZVR5cGUgIT09ICd3YXYnKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLor7fpgInmi6l3YXbmoLzlvI/mlofku7bvvIEiKTsKICAgICAgICAgIHRoaXMuZmlsZUxpc3RBY2NvbXBhbnkgPSBbXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy51cGxvYWRGaWxlc1snYWNjb21wYW55X2FjY29tcGFueSddID0gYWNjb21wYW55OwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIG9uTHlyaWNDaGFuZ2U6IGZ1bmN0aW9uIG9uTHlyaWNDaGFuZ2UoZmlsZSkgewogICAgICBpZiAoZmlsZS5yYXcpIHsKICAgICAgICB2YXIgbHlyaWMgPSBmaWxlLnJhdzsKICAgICAgICB2YXIgZmlsZVR5cGUgPSBnZXRGaWxlVHlwZShseXJpYyk7CgogICAgICAgIGlmIChmaWxlVHlwZSAhPT0gJ2xyYycpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuivt+mAieaLqWxyY+agvOW8j+aWh+S7tu+8gSIpOwogICAgICAgICAgdGhpcy5maWxlTGlzdEx5cmljID0gW107CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMudXBsb2FkRmlsZXNbJ2x5cmljJ10gPSBseXJpYzsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBvbk1WQ2hhbmdlOiBmdW5jdGlvbiBvbk1WQ2hhbmdlKGZpbGUpIHsKICAgICAgaWYgKGZpbGUucmF3KSB7CiAgICAgICAgdmFyIG12ID0gZmlsZS5yYXc7CiAgICAgICAgdmFyIGZpbGVUeXBlID0gZ2V0RmlsZVR5cGUobXYpOwoKICAgICAgICBpZiAoZmlsZVR5cGUgIT09ICdtcDQnKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLor7fpgInmi6ltcDTmoLzlvI/mlofku7bvvIEiKTsKICAgICAgICAgIHRoaXMuZmlsZUxpc3RNViA9IFtdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnVwbG9hZEZpbGVzWydtdiddID0gbXY7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgaGFuZGxlT3JpZ2luYWxSZW1vdmU6IGZ1bmN0aW9uIGhhbmRsZU9yaWdpbmFsUmVtb3ZlKCkgewogICAgICBkZWxldGUgdGhpcy51cGxvYWRGaWxlcy5vcmlnaW5hbDsKICAgIH0sCiAgICBoYW5kbGVBY2NvbXBhbnlSZW1vdmU6IGZ1bmN0aW9uIGhhbmRsZUFjY29tcGFueVJlbW92ZSgpIHsKICAgICAgZGVsZXRlIHRoaXMudXBsb2FkRmlsZXMuYWNjb21wYW55X2FjY29tcGFueTsKICAgIH0sCiAgICBoYW5kbGVMeXJpY1JlbW92ZTogZnVuY3Rpb24gaGFuZGxlTHlyaWNSZW1vdmUoKSB7CiAgICAgIGRlbGV0ZSB0aGlzLnVwbG9hZEZpbGVzLmx5cmljOwogICAgfSwKICAgIGhhbmRsZU1WUmVtb3ZlOiBmdW5jdGlvbiBoYW5kbGVNVlJlbW92ZSgpIHsKICAgICAgZGVsZXRlIHRoaXMudXBsb2FkRmlsZXMubXY7CiAgICB9LAogICAgaGFuZGxlUHJldmlldzogZnVuY3Rpb24gaGFuZGxlUHJldmlldyhmaWxlKSB7CiAgICAgIGNvbnNvbGUubG9nKGZpbGUucmF3KTsKICAgIH0sCiAgICBiZWZvcmVSZW1vdmU6IGZ1bmN0aW9uIGJlZm9yZVJlbW92ZShmaWxlKSB7CiAgICAgIHJldHVybiB0aGlzLiRjb25maXJtKCJcdTc4NkVcdTVCOUFcdTc5RkJcdTk2NjQgIi5jb25jYXQoZmlsZS5uYW1lLCAiXHVGRjFGIikpOwogICAgfSwKICAgIGhhbmRsZUV4Y2VlZDogZnVuY3Rpb24gaGFuZGxlRXhjZWVkKCkgewogICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+mZkOWItumAieaLqSAxIOS4quaWh+S7ticpOwogICAgfSwKICAgIGNsZWFyRmlsZXM6IGZ1bmN0aW9uIGNsZWFyRmlsZXMoKSB7CiAgICAgIHRoaXMuZmlsZUxpc3RPcmlnaW5hbCA9IFtdOwogICAgICB0aGlzLmZpbGVMaXN0QWNjb21wYW55ID0gW107CiAgICAgIHRoaXMuZmlsZUxpc3RMeXJpYyA9IFtdOwogICAgICB0aGlzLmZpbGVMaXN0TVYgPSBbXTsKICAgICAgdGhpcy51cGxvYWRGaWxlcyA9IHt9OwogICAgfQogIH0KfTs="},{"version":3,"sources":["AccompanySingForm.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <el-card shadow=\"never\" class=\"box-card\">\n    <div slot=\"header\" class=\"clearfix\">\n      <span>伴奏演唱模式</span>\n    </div>\n\n    <el-form :inline=\"true\" :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\">\n      <el-form-item label=\"原唱音频\" prop=\"original\">\n        <el-upload\n          class=\"upload-demo\"\n          action=\"https://jsonplaceholder.typicode.com/posts/\"\n          :on-change=\"onOriginalChange\"\n          :on-preview=\"handlePreview\"\n          :on-remove=\"handleOriginalRemove\"\n          :on-exceed=\"handleExceed\"\n          :limit=\"1\"\n          :before-remove=\"beforeRemove\"\n          :file-list=\"fileListOriginal\"\n          :auto-upload=\"false\"\n        >\n          <el-button size=\"small\" type=\"primary\">选择文件</el-button>\n        </el-upload>\n      </el-form-item>\n\n\n      <el-form-item label=\"伴奏音频\" prop=\"accompany\">\n        <el-upload\n          class=\"upload-demo\"\n          action=\"https://jsonplaceholder.typicode.com/posts/\"\n          :on-change=\"onAccompanyChange\"\n          :on-preview=\"handlePreview\"\n          :on-remove=\"handleAccompanyRemove\"\n          :on-exceed=\"handleExceed\"\n          :limit=\"1\"\n          :before-remove=\"beforeRemove\"\n          :file-list=\"fileListAccompany\"\n          :auto-upload=\"false\"\n        >\n          <el-button size=\"small\" type=\"primary\">选择文件</el-button>\n        </el-upload>\n      </el-form-item>\n\n      <el-form-item label=\"歌词\" prop=\"lyric\">\n        <el-upload\n          class=\"upload-demo\"\n          action=\"https://jsonplaceholder.typicode.com/posts/\"\n          :on-change=\"onLyricChange\"\n          :on-preview=\"handlePreview\"\n          :on-remove=\"handleLyricRemove\"\n          :on-exceed=\"handleExceed\"\n          :limit=\"1\"\n          :before-remove=\"beforeRemove\"\n          :file-list=\"fileListLyric\"\n          :auto-upload=\"false\"\n        >\n          <el-button size=\"small\" type=\"primary\">选择文件</el-button>\n        </el-upload>\n      </el-form-item>\n\n      <el-form-item label=\"MV\" prop=\"mv\">\n        <el-upload\n          class=\"upload-demo\"\n          action=\"https://jsonplaceholder.typicode.com/posts/\"\n          :on-change=\"onMVChange\"\n          :on-preview=\"handlePreview\"\n          :on-remove=\"handleMVRemove\"\n          :on-exceed=\"handleExceed\"\n          :limit=\"1\"\n          :before-remove=\"beforeRemove\"\n          :file-list=\"fileListMV\"\n          :auto-upload=\"false\">\n          <el-button size=\"small\" type=\"primary\">选择文件</el-button>\n        </el-upload>\n      </el-form-item>\n    </el-form>\n  </el-card>\n</template>\n\n<script>\nimport { getFileType } from '../utils/utils';\n\nexport default {\n  data() {\n    return {\n      uploadFiles: {},\n      fileListOriginal: [],\n      fileListAccompany: [],\n      fileListLyric: [],\n      fileListMV: [],\n      ruleForm: {},\n      rules: {\n        original: [\n          { required: true },\n        ],\n        accompany: [\n          { required: true, }\n        ],\n        lyric: [\n          { required: true, }\n        ],\n        mv: [\n          { required: true, }\n        ],\n      },\n    };\n  },\n\n  methods: {\n    onOriginalChange(file) {\n      if (file.raw) {\n        var original = file.raw;\n        const fileType = getFileType(original);\n        if (fileType !== 'wav') {\n          this.$message.error(\"请选择wav格式文件！\");\n          this.fileListOriginal = [];\n        } else {\n          this.uploadFiles['original'] = original;\n        }\n      }\n    },\n    onAccompanyChange(file) {\n      if (file.raw) {\n        var accompany = file.raw;\n        const fileType = getFileType(accompany);\n        if (fileType !== 'wav') {\n          this.$message.error(\"请选择wav格式文件！\");\n          this.fileListAccompany = [];\n        } else {\n          this.uploadFiles['accompany_accompany'] = accompany;\n        }\n      }\n    },\n    onLyricChange(file) {\n      if (file.raw) {\n        var lyric = file.raw;\n        const fileType = getFileType(lyric);\n        if (fileType !== 'lrc') {\n          this.$message.error(\"请选择lrc格式文件！\");\n          this.fileListLyric = [];\n        } else {\n          this.uploadFiles['lyric'] = lyric;\n        }\n      }\n    },\n    onMVChange(file) {\n      if (file.raw) {\n        var mv = file.raw;\n        const fileType = getFileType(mv);\n        if (fileType !== 'mp4') {\n          this.$message.error(\"请选择mp4格式文件！\");\n          this.fileListMV = [];\n        } else {\n          this.uploadFiles['mv'] = mv;\n        }\n      }\n    },\n    handleOriginalRemove() {\n      delete this.uploadFiles.original;\n    },\n    handleAccompanyRemove() {\n      delete this.uploadFiles.accompany_accompany;\n    },\n    handleLyricRemove() {\n      delete this.uploadFiles.lyric;\n    },\n    handleMVRemove() {\n      delete this.uploadFiles.mv;\n    },\n    handlePreview(file) {\n      console.log(file.raw);\n    },\n    beforeRemove(file) {\n      return this.$confirm(`确定移除 ${ file.name }？`);\n    },\n    handleExceed() {\n      this.$message.warning('限制选择 1 个文件');\n    },\n    clearFiles() {\n      this.fileListOriginal = [];\n      this.fileListAccompany = [];\n      this.fileListLyric = [];\n      this.fileListMV = [];\n      this.uploadFiles = {};\n    },\n  },\n};\n</script>\n\n"],"sourceRoot":"src/components"}]}